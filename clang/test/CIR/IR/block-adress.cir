// RUN: cir-opt %s | cir-opt | FileCheck %s

!void = !cir.void

module {
  cir.func @block_address(){
    %0 = cir.blockaddress <@block_address, "label"> -> !cir.ptr<!void>
    cir.br ^bb1
  ^bb1:
    cir.label <@block_address, "label">
    cir.return
  }
// CHECK: cir.func @block_address
// CHECK: %0 = cir.blockaddress <@block_address, "label"> -> !cir.ptr<!void>
// CHECK:   cir.br ^bb1
// CHECK: ^bb1:
// CHECK:   cir.label <@block_address, "label">
// CHECK:   cir.return

cir.func @block_address_inside_scope() -> () {
  cir.scope{
    %0 = cir.blockaddress <@block_address_inside_scope, "label"> -> !cir.ptr<!void>
  }
  cir.br ^bb1
^bb1:
  cir.label <@block_address_inside_scope, "label">
  cir.return
}
// CHECK: cir.func @block_address_inside_scope
// CHECK: cir.scope
// CHECK:  %0 = cir.blockaddress <@block_address_inside_scope, "label"> -> !cir.ptr<!void>
// CHECK:  cir.label <@block_address_inside_scope, "label">
// CHECK: cir.return
}
