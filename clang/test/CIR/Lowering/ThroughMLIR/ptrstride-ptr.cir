// RUN: cir-opt %s --cir-to-mlir | FileCheck %s -check-prefix=MLIR

!s32i = !cir.int<s, 32>
module {
  cir.func @raw_pointer(%p : !cir.ptr<!s32i>) -> !s32i {
    // MLIR:     func.func @raw_pointer(%[[ARG0:.*]]: memref<?xi32>) -> i32 {
    // MLIR:      %[[TWO:.*]] = arith.constant 2 : i32
    // MLIR-NEXT: %[[I:.*]] = arith.index_cast %[[TWO]] : i32 to index
    // MLIR-NEXT: %[[R:.*]] = memref.load %[[ARG0]][%[[I]]] : memref<?xi32>
    // MLIR-NEXT: return %[[R]] : i32

    %0 = cir.const #cir.int<2> : !s32i
    %1 = cir.ptr_stride %p, %0 : (!cir.ptr<!s32i>, !s32i) -> !cir.ptr<!s32i>
    %2 = cir.load %1 : !cir.ptr<!s32i>, !s32i
    cir.return %2 : !s32i
  }
}
